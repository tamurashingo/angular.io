<!DOCTYPE html><html lang="en" ng-app="angularIOApp" itemscope itemtype="http://schema.org/Framework"><head><title>Testing an Angular Pipe - ts</title><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="Angular is a development platform for building mobile and desktop web applications"/><meta name="keywords" content="Angular, AngularJS, AngularDart, Javscript, Dart, Framework, JavaScript MVC, Google"/><meta name="robots" content="all"/><meta name="referrer" content="origin"/><meta name="viewport" id="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="Angular"/><meta property="og:image" content="/resources/images/logos/standard/shield-large.png"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="184"/><meta property="og:image:height" content="200"/><meta property="og:description" content="Angular is a development platform for building mobile and desktop web applications"/><meta itemprop="name" content="Angular"/><meta itemprop="description" content="Angular is a development platform for building mobile and desktop web applications"/><meta itemprop="image" content="https://angular.io/resources/images/logos/standard/shield-large.png"/><link rel="icon" type="image/x-icon" href="/resources/images/icons/favicon.ico"/><link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.css"/><link href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,400italic,700" rel="stylesheet" type="text/css"/><link rel="stylesheet" href="/resources/css/vendor/icomoon/style.css"/><link rel="stylesheet" href="/resources/css/vendor/animate.css"/><link rel="stylesheet" href="/resources/css/main.css"/><!-- MOBILE ICONS -->
<link rel="apple-touch-icon" sizes="57x57" href="/resources/images/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/resources/images/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/resources/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/resources/images/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/resources/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/resources/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/resources/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/resources/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/resources/images/favicons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/resources/images/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/resources/images/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/resources/images/favicons/manifest.json"></head><body ng-controller="AppCtrl" class="l-offset-nav l-offset-side-nav"><md-toolbar class="main-nav background-regal l-pinned-top l-layer-5"><nav><h1><a href="/" md-button>Angular <sup>by Google</sup></a></h1><button aria-label="View Menu" ng-click="toggleMainMenu($event)" md-button="md-button" class="main-nav-button main-nav-mobile-trigger l-right">Site Menu <span class="icon icon-arrow-drop-down"></span></button><ul ng-class="showMainNav ? 'is-visible' : ''"><li class="l-left"><a class="main-nav-button" href="/features.html" md-button>Features</a></li><li class="l-left"><a class="main-nav-button" href="/docs/ts/latest/" md-button>Docs</a></li><li class="l-left"><a class="main-nav-button" href="/about/" md-button>About</a></li><li class="l-left"><a class="main-nav-button" href="/contribute.html" md-button>Contribute</a></li><li class="l-right"><a class="main-nav-button has-icon" href="/download/" md-button> <span class="icon icon-cloud-download"></span> Install</a></li></ul></nav></md-toolbar><nav class="side-nav l-pinned-left l-layer-4 l-offset-nav"><!-- SEARCH BAR--><header class="side-nav-search st-input-wrapper"><form class="st-input-inner"><label for="search-io" class="is-hidden">Search Docs</label><input type="search" id="search-io" placeholder="SEARCH DOCS..."/></form><button aria-label="View Docs Menu" ng-click="toggleDocsMenu($event)" md-button="md-button" class="mobile-trigger button">Docs <span class="icon icon-arrow-drop-down"></span></button></header><!-- PRIMARY NAVIGATION--><ul ng-class="showDocsNav ? 'is-visible' : ''" class="side-nav-primary"><li><a href="/docs/ts/latest/index.html" md-button><span class="side-nav-icon icon-home"></span> Docs Home</a></li><!-- SECONDARY NAVIGATION--><li><a href="/docs/ts/latest/quickstart.html" md-button><span class="side-nav-icon icon-query-builder"></span> 5 Min Quickstart</a></li><!-- SECONDARY NAVIGATION--><li><a href="/docs/ts/latest/tutorial/" md-button><span class="side-nav-icon icon-list"></span> Tutorial</a></li><!-- SECONDARY NAVIGATION--><li><a href="/docs/ts/latest/guide/" md-button><span class="side-nav-icon icon-list"></span> Developer Guides</a></li><!-- SECONDARY NAVIGATION--><li class="is-selected"><a href="/docs/ts/latest/testing/" md-button><span class="side-nav-icon icon-list"></span> Testing Guides</a></li><!-- SECONDARY NAVIGATION--><!--SECONDARY NAVIGATION--><ul class="side-nav-secondary is-ordered"><!-- DEFAULT LIST VALUES--><!-- TERTIARY NAVIGATION--><!-- DEFAULT LIST VALUES--><!-- TERTIARY NAVIGATION--><!-- DEFAULT LIST VALUES--><!-- API LIST VALUES--><!-- ORDERED LIST VALUES--><li><a href="/docs/ts/latest/testing/jasmine-testing-101.html" md-button>1. Jasmine Testing 101</a></li><!-- TERTIARY NAVIGATION--><!-- DEFAULT LIST VALUES--><!-- API LIST VALUES--><!-- ORDERED LIST VALUES--><li><a href="/docs/ts/latest/testing/application-under-test.html" md-button>2. The Application Under Test</a></li><!-- TERTIARY NAVIGATION--><!-- DEFAULT LIST VALUES--><!-- API LIST VALUES--><!-- ORDERED LIST VALUES--><li><a href="/docs/ts/latest/testing/first-app-tests.html" md-button>3. First App Tests</a></li><!-- TERTIARY NAVIGATION--><!-- DEFAULT LIST VALUES--><!-- API LIST VALUES--><!-- ORDERED LIST VALUES--><li class="is-selected"><a href="/docs/ts/latest/testing/testing-an-angular-pipe.html" md-button>4. Testing an Angular Pipe</a></li><!-- TERTIARY NAVIGATION--><!-- TERTIARY NAVIGATION--></ul><li><a href="/docs/ts/latest/api/" md-button><span class="side-nav-icon icon-book"></span> API Preview</a></li><!-- SECONDARY NAVIGATION--><li><a href="/docs/ts/latest/resources.html" md-button><span class="side-nav-icon icon-play-circle-fill"></span> Angular Resources</a></li><!-- SECONDARY NAVIGATION--><li><a href="/docs/ts/latest/help.html" md-button><span class="side-nav-icon icon-chat"></span> Help &amp; Support</a></li><!-- SECONDARY NAVIGATION--></ul></nav><header class="hero background-sky"><h1 class="hero-title text-display-1 ">Testing an Angular Pipe</h1><!-- Replace _ undscores with . dots --><!-- Replace _ undscores with . dots --><!-- VERSION TREE CREATOR MIXIN --><!-- BUTTON TITLE GENERATION  --><!-- DROPDOWN BUTTON --><nav class="hero-subtitle text-subhead dropdown"><button aria-label="Select a version of Angular" md-button="md-button" ng-click="toggleVersionMenu($event)" class="dropdown-button">Angular 2 for TypeScript  <span class="icon icon-arrow-drop-down"></span></button><div ng-click="toggleVersionMenu($event)" ng-show="showMenu" class="overlay ng-hide"></div><!-- DROPDOWN MENU --><div ng-class="showMenu ? 'is-visible' : ''" class="dropdown-menu"><ul><li><a href="/docs/ts/latest/testing/" md-button>Angular 2 for TypeScript </a></li></ul><ul><li><a href="/docs/js/latest/testing/" md-button>Angular 2 for JavaScript </a></li></ul><ul><li><a href="/docs/dart/latest/testing/" md-button>Angular 2 for Dart </a></li></ul><ul><li><a href="https://angularjs.org/" md-button> Angular 1 for JavaScript</a></li><li><a href="https://docs.angulardart.org/" md-button> Angular 1 for Dart</a></li></ul></div></nav><div class="social-icons"><button aria-label="Share on G+" onClick="window.open('https://plus.google.com/share?url=http://angular.io', '', 'height=500, width=600')" class="googleplus"><span class="icon-google-plus2"></span></button><button aria-label="Share on Twitter" onClick="window.open('https://twitter.com/share?text=Angular%20-%20Angular is a development platform for building mobile and desktop web applications', '', 'height=250, width=600')"><span class="icon-twitter2"></span></button><button aria-label="Share on Facebook" onClick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://angular.io', '', 'height=500, width=600')" data-href="http://angular.io" data-colorscheme="dark" data-layout="button_count" data-action="like" data-show-faces="false"><span class="icon-facebook2"></span></button><button aria-label="Share on Linkedin" onClick="window.open('http://www.linkedin.com/shareArticle?mini=true&amp;url=http://angular.io&amp;title=Angular&amp;summary=Angular is a development platform for building mobile and desktop web applications.', '', 'height=625, width=500')"><span class="icon-linkedin"></span></button></div><p style="color: black;"></p></header><div class="banner"><p class="text-body">We test an Angular-aware part of our app</p></div><article class="l-content-small grid-fluid docs-content"><p>We’ll test an Angular pipe in this chapter</p>
<p>An Angular pipe is a declarative way in HTML to transform some input into some displayable output.</p>
<p>We’ll look at our app’s custom <code>InitCapsPipe</code> that converts a string of words into a string of capitalized words.</p>
<p>We use it our <code>hero-detail.component.html</code> template to turn a hero name like “eeny weenie” into “Eeny Weenie”</p>
<code-example format="linenums" language="html" escape="html"><h2>{{hero.name  | initCaps}} is {{userName}}'s current super hero!</h2>
</code-example><p>The code for <code>InitCapsPipe</code> in <code>init-caps-pipe.ts</code> is quite brief:</p>
<pre><code>import {Pipe} from &#39;angular2/angular2&#39;;

@Pipe({ name: &#39;initCaps&#39; })
export class InitCapsPipe {
  transform(value: string) {
    return value.toLowerCase().replace(/(?:^|\s)[a-z]/g, function(m) {
      return m.toUpperCase();
    });
  }
}
</code></pre><p>In this chapter we will:</p>
<ul>
<li>add the Angular 2 library to our test harness</li>
<li>test this custom Angular pipe class</li>
<li>load multiple test files in our test harness, using system.js</li>
</ul>
<div class="callout is-helpful"><header>Prior Knowledge</header><p>The Unit Testing chapters build upon each other. We recommend reading them in order.
We&#39;re also assuming that you&#39;re already comfortable with basic Angular 2 concepts and the tools
we introduced in the <a href="../quickstart.html">QuickStart</a> and
the <a href="../tutorial/">Tour of Heroes</a> tutorial
such as <code>npm</code>, <code>gulp</code>, and <code>live-server</code>.</p>
</div><h2 id="add-the-angular-library">Add the Angular library</h2>
<p>Looking back at <code>unit-tests.html</code> we realize that we have not loaded the Angular library.
Yet we were able to load and test the application’s <code>Hero</code> class.</p>
<p><strong>We were lucky!</strong>  The <code>Hero</code> class has no dependence on Angular.
If it had depended on Angular, we’d still be staring at the Jasmine “big-time fail” screen:</p>
<figure class="image-display"><img src="/resources/images/devguide/testing-an-angular-pipe/big-time-fail-screen.png" style="width:400px" alt="Jasmine's' big time fail screen"></figure><p>If we then opened the browser’s Developer Tools (F12, Ctrl-Shift-I) and looked
in the console window, we would see that SystemJS
tried to load Angular and couldn&#39;t find it.</p>
<code-example format="" language="html" escape="html">GET http://127.0.0.1:8080/src/angular2/angular2 404 (Not Found)
</code-example><p>We are writing an Angular application afterall and
we were going to need Angular sooner or later. That time has come.
The <code>InitCapsPiep</code> clearly depends on Angular as is clear in the first few lines:</p>
<pre><code>import {Pipe} from &#39;angular2/angular2&#39;;

@Pipe({ name: &#39;initCaps&#39; })
export class InitCapsPipe {
</code></pre><p><strong>Open</strong> <code>unit-tests.html</code></p>
<p><strong>Find</strong> the <code>src=&quot;../node_modules/systemjs/dist/system.src.js&quot;&gt;&lt;/script&gt;</code></p>
<p><strong>Replace</strong> Step #1  with these two scripts:</p>
<pre><code>&lt;!-- #1. add the system.js and angular libraries --&gt;
&lt;script src=&quot;../node_modules/systemjs/dist/system.src.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;../node_modules/angular2/bundles/angular2.dev.js&quot;&gt;&lt;/script&gt;
</code></pre><h2 id="add-another-spec-file">Add another spec file</h2>
<p><strong>Create</strong> an <em><code>init-caps-pipe.spec.ts</code>*</em> next to <code>init-caps-pipes.ts</code> in <code>src/app</code></p>
<p><strong>Stop and restart the TypeScript compiler</strong> to ensure we compile the new file.</p>
<p><strong>Add</strong> the following lines of rather obvious Jasmine test code</p>
<pre><code>import {InitCapsPipe} from &#39;./init-caps-pipe&#39;;

describe(&#39;InitCapsPipe&#39;, () =&gt; {
  let pipe:InitCapsPipe;

  beforeEach(() =&gt; {
    pipe = new InitCapsPipe();
  });

  it(&#39;transforms &quot;abc&quot; to &quot;Abc&quot;&#39;, () =&gt; {
    expect(pipe.transform(&#39;abc&#39;)).toEqual(&#39;Abc&#39;);
  });

  it(&#39;transforms &quot;abc def&quot; to &quot;Abc Def&quot;&#39;, () =&gt; {
    expect(pipe.transform(&#39;abc def&#39;)).toEqual(&#39;Abc Def&#39;);
  });

  it(&#39;leaves &quot;Abc Def&quot; unchanged&#39;, () =&gt; {
    expect(pipe.transform(&#39;Abc Def&#39;)).toEqual(&#39;Abc Def&#39;);
  });
});
</code></pre><p>Note that each test is short (one line in our case).
It has a clear label that accurately describes the test. And it makes exactly one expectation.</p>
<p>Anyone can read these tests and understand quickly what the test does and what the pipe does.
If one of the tests fails, we know which expected behavior is no longer true.
We’ll have little trouble maintaining these tests and adding more like them as we encounter new conditions to explore.</p>
<p>That’s the way we like our tests!</p>
<h2 id="add-this-spec-to-unit-tests-html-">Add this spec to <code>unit-tests.html</code></h2>
<p>Now let’s wire our new spec file into the HTML test harness.</p>
<p>Open <code>unit-tests.html</code>. Find <code>System.import(&#39;app/hero.spec&#39;)</code>.</p>
<p>Hmm. We can’t just add <code>System.import(&#39;app/init-caps-pipe.spec&#39;)</code>.</p>
<p>The first <code>System.import</code> returns a promise as does this second import.
We can’t run any of the Jasmine tests until <strong>both imports are finished</strong>.</p>
<p>Fortunately, we can create a new <code>Promise</code> that wraps both import promises and waits
for both to finish loading.</p>
<pre><code>// #3. Import the spec files explicitly
Promise.all([
  System.import(&#39;app/hero.spec&#39;),
  System.import(&#39;app/init-caps-pipe.spec&#39;)
])
</code></pre><p>Try it. The browser should refresh and show</p>
<figure class="image-display"><img src="/resources/images/devguide/testing-an-angular-pipe/5-specs-0-failures.png" style="width:400px" alt="import promises 5 specs, 0 failures"></figure><p>We have a pattern for adding new tests.</p>
<p>In future, when we add a new spec, we add another <code>System.import(&#39;app/some.spec&#39;)</code> to
the array argument passed to <code>Promise.all</code>.</p>
<h2 id="what-s-next-">What’s Next?</h2>
<p>Now we can test parts of our application that we <em>load</em> asynchronously with system.js.</p>
<p>What about testing parts that <em>are themselves asynchronous</em>?</p>
<p>In the next chapter we’ll test a service with a public asynchronous method that fetches heroes
from a remote server.</p></article><div class="main-footer"><nav class="background-silver grid-fluid"><div class="c3 main-footer-branding"><div class="logo-inverse-large"></div></div><div class="c2"><h3 class="text-headline">LIBRARIES</h3><ul class="text-body"><li><a href="/"> Angular 2.0</a></li><li><a href="https://angularjs.org/"> Angular 1 for JS</a></li><li><a href="https://angulardart.org/"> Angular 1 for Dart</a></li><li><a href="https://material.angularjs.org"> Angular Material</a></li><li><a href="https://www.firebase.com/docs/web/libraries/angular/"> AngularFire</a></li></ul></div><div class="c2"><h3 class="text-headline">LEARN</h3><ul class="text-body"><li><a href="/docs/ts/latest/quickstart.html"> 5 Min Quickstart</a></li><li><a href="/docs/ts/latest/guide/"> Step by Step Guide</a></li><li><a href="/docs/ts/latest/api/"> Full API</a></li><li><a href="/docs/ts/latest/resources.html"> Resources</a></li><li><a href="http://goo.gl/sj0Nk1">Design Docs &amp; Notes</a></li></ul></div><div class="c2"><h3 class="text-headline">HELP</h3><ul class="text-body"><li><a href="https://groups.google.com/forum/#!forum/angular"> Google Group</a></li><li><a href="https://gitter.im/angular/angular"> Chat Room</a></li><li><a href="https://github.com/angular/angular/issues"> Report an Issue</a></li></ul></div><div class="c3"><h3 class="text-headline">COMMUNITY</h3><ul class="text-body"><li><a href="https://blog.angularjs.org/"> Blog</a></li><li><a href="https://plus.sandbox.google.com/+AngularJS/posts"> Google+</a></li><li><a href="https://twitter.com/angularjs"> Twitter</a></li><li><a href="https://github.com/angular/angular"> GitHub</a></li></ul></div></nav><footer class="background-steel"><small class="text-caption">Powered by Google ©2010-2015. Code licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" class="text-snow">Apache License, Version 2.0</a>. Documentation licensed under <a class="text-snow" href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</small><a aria-label="View Style Guide" href="/docs/styleguide.html" title="Style Guide" md-button="md-button" class="styleguide-trigger text-snow"><span class="icon-favorite"></span></a></footer></div><!-- VENDORS --><script src="/resources/js/vendor/prettify.js"></script><script src="/resources/js/vendor/lang-basic.js"></script><script src="/resources/js/vendor/lang-dart.js"></script><script src="/resources/js/vendor/lodash.js"></script><!-- Angular Material Dependencies --><script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script><script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script><script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js"></script><script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.js"></script><!-- Angular.io Site JS --><script src="/resources/js/site.js"></script><script src="/resources/js/controllers/app-controller.js"></script><script src="/resources/js/directives/bio.js"></script><script src="/resources/js/directives/code-tabs.js"></script><script src="/resources/js/directives/code-pane.js"></script><script src="/resources/js/directives/code-example.js"></script><!-- GA --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', ' UA-70058104-1', 'auto');
ga('send', 'pageview')

</script><!-- SWIFTYPE --><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

_st('install','VsuU7kH5Hnnj9tfyNvfK');</script></body></html>